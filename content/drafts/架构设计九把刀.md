---
title: '[后台]架构设计九把刀'
date: 2022-08-10T16:46:55+08:00
lastmod: 2022-08-10T16:46:55+08:00
tags: ["后台"]
categories: ["后台"]
draft: true
description: 待办
---

# 架构设计九把刀

架构的核心：降低代码复杂度


# 降低代码复杂度
## 高内聚低耦合

### 

## 规范编码习惯

代码目录是架构的根本

注释：特殊逻辑一定要有注释，对自己和别人都好

git提交信息：言简意赅

很不想写的逻辑，一般不是架构问题就是产品思路问题

## 扩展点

引用业务的模块，而不是让业务破坏自己的代码


## 清晰的定义

-   字段在不同场景的含义一定要相同
-   字段不能混用

## 外键：高关联度

实体之间互相存储外键


# 高性能，低延时

## 异步

层状async

图状任务依赖调度器

# 错误、稳定性

## 分布式锁
粒度：最小，尽可能和uniq key一致
```
ok, err := redis.SetNX(ctx, key, value, expiration).Result()
if err == nil {
	if !ok {
		// 加锁失败
	}
	// 加锁成功
	return nil
}
// 出错，可以重试或者直接加锁失败

```

